<!DOCTYPE html>
<html>
<head>
        <title>Web Annotation Data Model: Roles</title>
        <meta charset='utf-8'></meta>
        <style>

.model {
 empty-cells: show;
 border-collapse: collapse; 
 margin-bottom: .5ex;
 border: 1px solid black;
}

.model th {
 padding: 3px;
 border: 1px solid #404040;
 text-align: center;
 font-weight: bold;
 font-family: sans-serif;
}

.model td {
 padding: 5px;
 border: 1px solid #404040;
 text-align: left;
 font-family: sans-serif;
}

.nanotabs > ul li { float:left; list-style:none; }
.nanotabs > ul li a { display:block; padding:4px 6px; margin-right: 3px; border-left: 1px solid #b9ab2d; border-right: 1px solid #b9ab2d; border-top: 1px solid #b9ab2d; border-collapse: collapse; background:#fcfaee; color:#b9ab2d; font-family: sans-serif;
 text-decoration:none; }
.nanotabs > ul li a:hover { background:#FFFCE5; color:#550; }
.nanotabs > ul li a.selected { background:#555; color:#FFF; }

</style>
  <script src="nanotabs.js" type="text/javascript"></script>
  <script src='http://www.w3.org/Tools/respec/respec-w3c-common' async='true' class='remove'></script> 
  <script class='remove'>
      var respecConfig = {
          specStatus: "FPWD-NOTE", 
          shortName:  "annotation-model-roles",
          editors: [
                {   name:       "Tim Cole",
                    url:        "",
                    company:    "University of Illinois at Urbana-Champaign",
                    companyURL: "",
                    mailto:     ""  },

                {   name:       "Robert Sanderson",
                    url:        "http://www.stanford.edu/~azaroth/",
                    company:    "Stanford University",
                    companyURL: "http://www.stanford.edu/",
                    mailto:     "azaroth@stanford.edu"  }
          ],
          previousMaturity:     "",
          previousPublishDate:  "",
          previousURI:          "",
          publishDate:          "2015-08-18", 
          edDraftURI:           "http://w3c.github.io/web-annotation/",
          wg:                   "Web Annotation Working Group",
          wgURI:                "http://www.w3.org/annotation/",
          wgPublicList:         "public-annotation",
          wgPatentURI:          "http://www.w3.org/2004/01/pp-impl/73180/status",
          otherLinks: [
                {
                        key: "Repository",
                        data: [{
                                value: "Github Repository",
                                href: "https://github.com/w3c/web-annotation"
                        }]
                }
          ]
      };  
        </script> 
</head>

<body>

<section id="abstract"></section>
<section id="sotd"></section>

<section>
<h2>Introduction</h2>

<p>Some use cases require a role to be associated with a body or target resource, for example distinguishing between a body that's a comment or justification for a second body which is an edit to be made to the target resource.  The distinction between tagging a resource, either with a string or a URI, and describing it is also a common pattern for a single annotation.  The Web Annotation Data Model can currently only support the inference of a single role from the Motivation associated with the Annotation, or from the specific structures added to accomodate tagging.  This proposal takes the results of discussion within the Working Group and lays out concrete options, based on general consensus from the weekly teleconferences.</p>

</section>

<section>
<h2>Requirements and Desiderata</h2>

<p>The following are the requirements and desiderata for the change to the model.</p>

<p>
The model ...

<ol>
  <li>MUST allow the addition of roles to individual bodies</li>
  <li>SHOULD use the same construction for tags as other roles</li>
  <li>SHOULD allow the addition of roles to individual targets</li>
  <li>MUST allow for domain-specific extension of the set of roles</li>
  <li>SHOULD use the existing motivation structure</li>
  <li>MUST be usable in a Linked Data environment</li>
  <li>SHOULD follow Linked Data best practices</li>
  <li>MUST produce a JSON-LD serialization that is easy to use</li>
  <li>MUST NOT require clients to use any part of the RDF stack to accomplish common tasks</li>
  <li>SHOULD allow for graceful degradation when a particular role is not recognized by a client application</li>
</ol>

</p>

<section>
<h3>Additional Design Criteria</h3>

While not requirements, there are additional design criteria that are considered important to keep in mind:

<ul>
  <li>If there is a choice between making complex JSON and a complex graph structure, the complexity should be in the model, not the serialization</li>
  <li>The model must be as simple as possible, and no simpler</li> 
</ul>
</section>

<section>
<h3>Related Changes</h3>

Not related specifically to the issue of roles, the discussion has also brought up other issues that could be solved at the same time, particularly around making the serialization more friendly to non Linked Data developers:

<ol>
  <li>Use <code>id</code> and <code>type</code> instead of @id and @type in JSON-LD to make javascript dot notation viable</li>
  <li>The model SHOULD allow for the type of a resource to be inferred where possible, rather than stated explicitly in the serialization</li>
  <li>The naming of the properties and classes SHOULD be understandable by developers without knowing the Linked Data background</li>
</ol>

</section>
</section>

<section>
<h2>Changes to the Data Model</h2>
<p>
The following summarizes the changes proposed to fulfill the above requirements, with examples and further description below.</p>

<ol>
<li>Create a new predicate <code>oa:hasRole</code>, with a JSON-LD mapping of <code>role</code></li>, and associated with instances of <code>SpecificResource</code></li>
<li>Create a new predicate <code>oa:text</code> to replace <code>rdf:value</code> when used with <code>EmbeddedContent</code>, with a JSON-LD mapping of <code>text</code></li>
<li>Types MAY be included and MUST be included if there is otherwise ambiguity about the type of resource</li>
<li>Remove <code>Tag</code> and <code>SemanticTag</code> classes in favor of <code>SpecificResource</code> with roles</li>
<li>Use <code>content</code> as the key in the JSON-LD for the relationship between the <code>SpecificResource</code> and the full resource (currently <code>source</code>)

<li> Consider:
  <ol>
    <li>Renaming <code>oa:hasSource</code> to <code>oa:hasContent</code></li>
    <li>Requiring the use of <code>SpecificResource</code> for all annotations</li>
    <li>Removing <code>oa:motivatedBy</code> completely</li>
    <li>Allowing <code>hasRole</code> on <code>EmbeddedContent</code> for bodies</li>
    <li>Creating a new subclass of <code>EmbeddedContent</code> (e.g. EmbeddedTextualBody) which allows <code>oa:hasRole</code></li>
    <li>Renaming <code>EmbeddedContent</code> and <code>SpecificResource</code>, either in the model or the JSON-LD context (suggestions reqeusted)</li>
  </ol>
</li>
</ol>

<p>Options that were considered and discarded from consideration include:
  <ul>
    <li>The status quo, because per-body roles has pervasive use cases</li>
    <li>An offset asignment of the role, because it required the use of blank node identifiers and is more complex than allowing role on SpecificResource</li>
    <li>The use of subProperties of oa:hasBody, because the extensibility with graceful degradation is impossible without RDF inferencing (to know that edit:hasReplacement is a sub property of oa:hasBody)
    <li>Use of class instead of role, because it adds nothing and overloads the notion of class unnecessarily</li>
  </ul>
</p>

<section>
<h3>oa:hasRole on oa:SpecificResource</h3>

<p>The SpecificResource construction allows annotation specific information about a resource (either body or target) to be added in a single, consistent location.  As this construction already exists, and role is an annotation specific feature, it is appropriate to associate hasRole with the SpecificResource.  This allows the same resource to have different roles in different annotations, for example a page used as a semantic tag and as a comment.</p>

<p>When there is only a single body, 



<div class="nanotabs">
<ul>
  <li><a class="tab_jsonld" href="#eg1-1">JSON-LD</a></li>
  <li><a class="tab_turtle" href="#eg1-2">Turtle</a></li>
</ul>

<div id="eg1-1">
<pre class="example highlight" title="Basic Roles (JSON-LD)">
{
  "id": "http://example.org/anno1",
  "target": {"id": "http://example.org/target1"},
  "body": {
    "role": "commenting",
    "content": "http://example.org/body1"
  } 
}
</pre>
</div>
<div id="eg1-2">
<pre class="example highlight" title="Basic Roles (Turtle)">
&lt;http://example.org/anno1&gt; oa:hasTarget &lt;http://example.org/target1&gt; ;
    oa:hasBody [
        oa:hasRole oa:commenting ;
        oa:hasSource &lt;http://example.org/body1&gt;
    ]
</pre>
</div>
</div>
</section>


</section>

<section>
<h2>Outstanding Issues</h2>

<ul>
  <li>If the JSON-LD does NOT have a type statement, should the Turtle also not have the type statements?</li>
</ul>

</section>



</section>

<script type="text/javascript">
  nanotabs({e:"click"});
  nanotabs({e:"mouseover",s:"active"});
</script>

</body>

</html>


